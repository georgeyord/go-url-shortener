version: '3.4'

services:
  # Usage: docker-compose up url-shortener-api
  url-shortener-api:
    image: github.com/georgeyord/url-shortener-api:latest
    build:
      dockerfile: Dockerfile
      context: .
      args:
        TARGET_APP:  api
    environment:
      ENV: production
    volumes:
      - ./data/volume-data:/app/data
    ports:
      - target: 8080
        published: 8080
  # Usage: docker-compose run url-shortener-cli
  url-shortener-cli:
    image: github.com/georgeyord/url-shortener-cli:latest
    build:
      dockerfile: Dockerfile
      context: .
      args:
        TARGET_APP:  cli
    environment:
      ENV: production
    volumes:
      - ./data/volume-data:/app/data

